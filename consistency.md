\chapter{一致性验收报告}
\section{项目介绍}
成像系统的设计目的就是获取合格的原始图像，并且一个好的成像系统要保证系统运行期间图像质量的稳定。一般，人们过对成像系统连续拍摄的图片进行直接的主观判主要是通过肉眼比较图片差别是否一致来判断成像系统是否稳定。本项目设计了一个客观的评价算法流程，来稳定，高效，精准地解决图片一致性的问题。而现在要求的评价图片是否一致的指标包括亮度一致性，颜色一致性，对焦一致性。


\section{原理介绍}
\subsection{预处理}
因为待比较图像往往是由一部手机连续拍摄而成的，所以图像不可避免地会出现抖动，平移，旋转的现象。这会导致算法判断的效率和准确度下降，所以在一开始我们选择使用sift算子对待比较的两幅图像进行矫正，并将多余的边框内容进行裁剪删除。
\subsection{亮度一致性判断原理}
考虑到人眼视觉系统对RGB色域并不敏感，所以我们优先将图像转换到HSV色域进行比较。HSV中，H代表色度，S代表饱和度，V代表亮度，所以在这里我们只提取出图像的V通道的信息。将进行矫正对齐的待比较的两幅图像亮度通道分布分别记为V1和V2，接下来计算两个分布的JS散度分布距离即可得出两幅图像在亮度表现上的差异。将此差异与阈值进行比较最终判断是否一致。

\subsection{颜色一致性判断原理}
同样的，我们将进行矫正对齐的待比较的两幅图像色度通道分布分别记为H1和H2，接下来计算两个分布的JS散度分布距离即可得出两幅图像在色度表现上的差异。将此差异与阈值进行比较最终判断是否一致。

\subsection{对焦一致性判断原理}
考虑到对焦更加集中在比较锐利的区域，所以我们首先使用canny算子对进行矫正对齐的待比较的两幅图像进行边缘检测，然后比较两幅边缘图像的差距来判断对焦是否一致。

\section{测试结果}
在现有的一致性数据库上进行测试，亮度一致性与颜色一致性的准确率为94\%，92\%，均已超过90\%，但是受到图像内容差异影响（例如突然出现的人车，较剧烈的镜头晃动），对焦一致性准确率大致为86\%左右。
